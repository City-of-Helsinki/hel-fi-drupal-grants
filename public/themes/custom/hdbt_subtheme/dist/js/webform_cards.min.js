!function(e,t){"use strict";alert("aaa"),t.webform=t.webform||{},t.webform.cards=t.webform.cards||{},t.webform.cards.autoForwardDelay=t.webform.cards.autoForwardDelay||250,t.behaviors.webformCards={attach:function(a){(e(a).is("form.webform-submission-form")?e(a):e("form.webform-submission-form",a)).once("webform-cards").each((function(){var a,r,i,o=e(this),n={progressStates:o[0].hasAttribute("data-progress-states"),progressLink:o[0].hasAttribute("data-progress-link"),autoForward:o[0].hasAttribute("data-auto-forward"),autoForwardHideNextButton:o[0].hasAttribute("data-auto-forward-hide-next-button"),keyboard:o[0].hasAttribute("data-keyboard"),previewLink:o[0].hasAttribute("data-preview-link"),confirmation:o[0].hasAttribute("data-confirmation"),track:o.data("track"),toggle:o[0].hasAttribute("data-toggle"),toggleHideLabel:o.data("toggle-hide-label"),toggleShowLabel:o.data("toggle-show-label"),ajaxEffect:o.data("ajax-effect"),ajaxSpeed:o.data("ajax-speed"),ajaxScrollTop:o.data("ajax-scroll-top")},l=o.data("current-page"),s=e(".webform-progress"),d=o.find(':input[name="current_card"]'),f=o.find(".webform-card"),c=o.find(".form-actions").show(),g=c.find(".webform-button--preview"),m=c.find(".webform-button--submit"),b=c.find(".webform-button--previous"),u=c.find(".webform-button--next");if(f.length){var w;n.toggle&&(w=e('<button type="button" class="webform-cards-toggle"></button>').html(n.toggleShowLabel).on("click",k).wrap('<div class="webform-cards-toggle-wrapper"></div>').parent(),f.eq(0).before(w));var h=f.filter(":has(.form-item--error-message)");if(h.length)return o.find(".webform-progress").hide(),b.hide(),u.hide(),h.addClass("webform-card--error"),void S(h);b.data("default-label",b.val()),u.data("default-label",u.val()),b.on("click",(function(e){p(f.filter(".webform-card--active").prevAll('.webform-card:not([style*="display: none"])').first()),e.preventDefault()})).show(),u.on("click",(function(e){var t=o.validate(drupalSettings.cvJqueryValidateOptions);if(o.valid()){var a=f.filter(".webform-card--active").nextAll('.webform-card:not([style*="display: none"])').first();a.length?p(a):g.length?g.trigger("click"):m.trigger("click")}else t.focusInvalid(),S(f.filter(".webform-card--active"));e.preventDefault()})).show(),n.autoForward&&(o.find("input").not(":button, :submit, :reset, :image, :file").on("keydown",(function(e){if(13===e.which)return x(),e.preventDefault(),!1})),o.find('select[data-images]:not([multiple]), input[type="range"].form-webform-rating').on("change",x),o.find("input:radio, label[for]").on("mouseup",(function(t){var a="LABEL"===t.target.tagName?e("#"+e(t.target).attr("for")):e(this);a.is(":radio")&&"_other_"!==a.val()&&setTimeout((function(){x()}))}))),n.keyboard&&e("body").on("keydown",(function(e){if(37===e.which||39===e.which){if(void 0!==e.target.value&&void 0!==e.target.selectionStart&&null!==e.target.selectionStart){if(e.target.value.length!==e.target.selectionStart)return;if(e.target.value.length&&37===e.which)return}if("INPUT"!==e.target.tagName||"radio"!==e.target.type)switch(e.which){case 37:setTimeout((function(){b.trigger("click")}),t.webform.cards.autoForwardDelay);break;case 39:setTimeout((function(){u.trigger("click")}),t.webform.cards.autoForwardDelay)}}})),n.progressStates&&e(document).on("state:visible state:visible-slide",(function(t){e(t.target).hasClass("webform-card")&&e.contains(o[0],t.target)&&v()})),r=d.val(),(i=r?f.filter('[data-webform-key="'+r+'"]'):[]).length||(i=f.first()),p(i,!0)}else"webform_preview"===l&&o.find(".webform-preview").length&&(n.keyboard&&e("body").on("keydown",(function(e){switch(e.which){case 37:setTimeout((function(){b.trigger("click")}),t.webform.cards.autoForwardDelay);break;case 39:setTimeout((function(){m.trigger("click")}),t.webform.cards.autoForwardDelay)}})),a=o.find('.js-webform-wizard-pages-link[data-webform-page="webform_start"]'),n.progressLink&&s.find("[data-webform-card]").each((function(){var t=e(this),r=t.data("webform-card"),i=t.attr("title");t.find("[data-webform-progress-link]").attr({role:"link",title:i,"aria-label":i,tabindex:"0"}).on("click",(function(){d.val(r),a.trigger("click")})).on("keydown",(function(t){13===t.which&&e(this).trigger("click")}))})),n.previewLink&&o.find(".webform-card-edit[data-webform-card]").each((function(){var r=e(this),i=r.data("webform-card"),o=r.attr("title"),n=a.clone();n.removeAttr("data-webform-page data-msg-required").attr("id",n.attr("id")+"-"+i).attr("name",n.attr("name")+"-"+i).attr("data-drupal-selector",n.attr("data-drupal-selector")+"-"+i).attr("title",t.t("Edit '@title'",{"@title":o}).toString()).on("click",(function(){return d.val(i),a.trigger("click"),!1})),r.append(n).show()})));function p(a,r){if(a.length){var i=f.filter(".webform-card--active");i.removeClass("webform-card--active"),a.addClass("webform-card--active"),o.trigger("webform_cards:change",[a]),(a=f.filter(".webform-card--active")).get(0)===i.get(0)&&(r=!0),j(b,a.data("prev-button-label")||b.data("default-label")),j(u,a.data("next-button-label")||u.data("default-label"));var l=!!a.prevAll('.webform-card:not([style*="display: none"])').length;b.toggle(l);var s=!!a.nextAll('.webform-card:not([style*="display: none"])').length;g.toggle(!s),m.toggle(!s),u.toggle(s),function(){if(!n.autoForwardHideNextButton)return!1;if(o.hasClass("webform-cards-toggle-show"))return!1;var t=f.filter(".webform-card--active"),a=t.find("input:visible, select:visible, textarea:visible"),r=t.find('input[type="radio"], select[data-images]:not([multiple]), input[type="range"].form-webform-rating');if(!r.length||a.length!==r.length)return!1;var i,l,s=[];if(r.each((function(){i=this.name,"radio"===(l=this.type)?s[i]="radio":"select-one"===l?s[i]="select-one":"range"===l&&(s[i]="range")})),1!==Object.keys(s).length)return!1;switch(l){case"radio":return!e('[name="'+i+'"]:checked').length;case"range":return"0"===e('[name="'+i+'"]').val();case"select-one":return!e('[name="'+i+'"]').val()}}()&&u.hide(),r||(y(a),t.webformScrollTop(a,n.ajaxScrollTop)),function(t){if(o.hasClass("js-webform-autofocus")){var a=t.find(":input:visible").first();(function(t){var a=t[0].type,r=t[0].name;switch(a){case"checkbox":case"radio":return!!e('[name="'+r+'"]:checked').length;case"range":return"0"!==e('[name="'+r+'"]').val();default:return!!e('[name="'+r+'"]').val()}})(a)||a.trigger("focus")}}(a),d.val(a.data("webform-key")),o.attr("data-webform-current-card",a.data("webform-key")),function(e){if(n.track){var t="index"===n.track?f.index(e)+1:e.data("webform-key");o.data("webform-wizard-current-page",t);var a=window.location.toString(),r=/([?&])page=[^?&]+/;a=a.match(r)?a.replace(r,"$1page="+t):a+(-1!==a.indexOf("?")?"&page=":"?page=")+t,window.history.replaceState(null,null,a)}}(a),v()}}function v(){for(var a=function(){var t=f.filter(".webform-card--active").data("webform-key"),a=[],r=0,i=!0;return f.each((function(){var o=e(this),l=o.data("webform-key"),s=o.data("title"),d=t===l;d&&(i=!1);var f=!1;n.progressStates&&(f=o.is('[style*="display: none"]'))||r++,a.push({type:"card",key:l,title:s,step:f?null:r,hidden:f,active:d,complete:i})})),e(["webform_preview","webform_confirmation"]).each((function(){o.find('[data-webform-progress-steps] [data-webform-page="'+this+'"]').length&&(r++,a.push({type:"page",key:this,step:r}))})),a}(),r=0;r<a.length;r++){var i=a[r],d="[data-webform-"+i.type+'="'+i.key+'"]',c=s.find(d);if(c.find("[data-webform-progress-step]").attr("data-text",i.step),"page"!==i.type){c.toggle(!i.hidden),c.toggleClass("is-active",i.active),c.toggleClass("is-complete",!i.active&&i.complete);var m=c.find("[data-webform-progress-state]");if(m.toggle(i.active||i.complete),i.active&&m.html(t.t("Current")),i.complete&&m.html(t.t("Complete")),n.progressLink){var b=c.find("[data-webform-progress-link]");b.data("webform-key",i.key),i.complete?"link"!==b.attr("role")&&b.attr({role:"link",title:i.title,"aria-label":i.title,tabindex:"0"}).on("click",(function(){p(f.filter('[data-webform-key="'+e(this).data("webform-key")+'"]'))})).on("keydown",(function(t){13===t.which&&p(f.filter('[data-webform-key="'+e(this).data("webform-key")+'"]'))})):"link"===b.attr("role")&&b.removeAttr("role title aria-label tabindex").off("click keydown")}}}var u,w,h,v,y,k,x=(u=f.filter(".webform-card--active"),w=f.filter(':not([style*="display: none"])'),h="webform_preview"===l?w.length+1:w.index(u),v=w.length+(g.length?1:0)+(n.confirmation?1:0),y=Math.round(h/(v-1)*100),k=t.t("@index of @total",{"@index":h+1,"@total":v}),{index:h+1,total:v,percentage:y+"%",summary:k});for(var S in x)if(x.hasOwnProperty(S)){var j="[data-webform-progress-"+S+"]",A=x[S];s.find(j).html(A)}s.find("progress").attr({value:x.index,max:x.total})}function y(e){switch(n.ajaxEffect){case"fade":e.hide().fadeIn(n.ajaxSpeed);break;case"slide":e.hide().slideDown(n.ajaxSpeed)}}function k(t){o.hasClass("webform-cards-toggle-show")?(o.removeClass("webform-cards-toggle-show"),e(this).attr("title",n.toggleShowLabel).html(n.toggleShowLabel),p(f.filter(".webform-card--active"))):(o.addClass("webform-cards-toggle-show"),e(this).attr("title",n.toggleHideLabel).html(n.toggleHideLabel),y(f.filter(':not([style*="display: none"])')),u.hide(),b.hide(),g.show(),m.show(),o.trigger("webform_cards:change"))}function x(e){if(!o.hasClass("webform-cards-toggle-show")){var a=f.filter(".webform-card--active"),r=a.find("input:visible, select:visible, textarea:visible"),i=a.find("input:visible, select:visible");if(i.length&&r.length===i.length){var n=[];i.each((function(){var e=this.name;e in n||(n[e]=!1),("radio"===this.type&&this.checked||"select-one"===this.type&&-1!==this.selectedIndex||"range"===this.type&&this.value)&&(n[e]=!0)})),Object.keys(n).length>1||n.every((function(e){return e}))&&setTimeout((function(){u.trigger("click")}),t.webform.cards.autoForwardDelay)}}}function S(e){e.css("position","relative");for(var t=1;t<=3;t++)e.animate({left:-20},37.5).animate({left:20},75).animate({left:0},37.5)}function j(e,t){"BUTTON"===e[0].tagName?e.html(t):e.val(t)}}))}}}(jQuery,Drupal);