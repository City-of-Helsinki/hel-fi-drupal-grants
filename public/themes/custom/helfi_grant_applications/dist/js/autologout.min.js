!function(t,o,e){"use strict";function u(t){var o;return function(){var e=this,u=arguments,i=function(){o=null,t.apply(e,u)};o||t.apply(e,u),clearTimeout(o),o=setTimeout(i,500)}}o.behaviors.autologout={attach:function(i,a){if(i===document){var n,r,l,s,d;l=jQuery.extend(!0,{},a.autologout);var c=t('<div id="timer"></div>').hide();if(t("body").append(c),l.refresh_only)setTimeout((function t(){o.Ajax["autologout.refresh"].autologoutRefresh(t)}),l.timeout);else if(s=!1,l.logout_regardless_of_activity){var g=1e3*(Math.round((new Date).getTime()/1e3)-e.get("Drupal.visitor.autologout_login"));setTimeout(m,l.timeout-g)}else t("body").bind("formUpdated",u((function(o){t(o.target).trigger("preventAutologout")}))),t("body").bind("mousemove",u((function(o){t(o.target).trigger("preventAutologout")}))),"undefined"!=typeof CKEDITOR&&CKEDITOR.on("instanceCreated",(function(o){o.editor.on("contentDom",(function(){o.editor.document.on("keyup",u((function(e){t(o.editor.element.$).trigger("preventAutologout")})))}))})),t("body").bind("preventAutologout",(function(t){s=!0,clearTimeout(d),d=setTimeout((function(){s=!1}),6e4)})),setTimeout(m,l.timeout);o.Ajax.prototype.autologoutGetTimeLeft=function(o){var e=this;if(e.ajaxing)return!1;e.options.submit={uactive:s},e.options.success=function(u,i){return"string"==typeof u&&(u=t.parseJSON(u)),"string"==typeof u[0].command&&"alert"===u[0].command&&(window.location=l.redirect_url),o(u[1].settings.time),u[0].data='<div id="timer" style="display: none;">'+u[0].data+"</div>",e.success(u,i)};try{t.ajax(e.options)}catch(t){e.ajaxing=!1}},o.Ajax["autologout.getTimeLeft"]=o.ajax({base:null,element:document.body,url:drupalSettings.path.baseUrl+"autologout_ajax_get_time_left",submit:{uactive:s},event:"autologout.getTimeLeft",error:function(t,o){}}),o.Ajax.prototype.autologoutRefresh=function(o){var e=this;if(e.ajaxing)return!1;e.options.success=function(u,i){return"string"==typeof u&&(u=t.parseJSON(u)),"string"==typeof u[0].command&&"alert"===u[0].command&&(window.location=l.redirect_url),setTimeout(o,l.timeout),s=!1,u[0].data='<div id="timer" style="display: none;">'+u[0].data+"</div>",e.success(u,i)};try{t.ajax(e.options)}catch(t){e.ajaxing=!1}},o.Ajax["autologout.refresh"]=o.ajax({base:null,element:document.body,url:drupalSettings.path.baseUrl+"autologout_ajax_set_last",event:"autologout.refresh",error:function(t,o){}});var f=t("#autologout-cache-check-bit");0!==f.length&&("1"===f.val()&&y(),f.val("1"))}function m(){var u=a.autologout.no_dialog;s?(s=!1,y()):(n=setTimeout(p,l.timeout_padding),o.Ajax["autologout.getTimeLeft"].autologoutGetTimeLeft((function(i){if(i>0)clearTimeout(n),setTimeout(m,i);else{if(u)return void h();r=function(){var u=a.autologout.disable_buttons,i={};if(!u){var r=a.autologout.yes_button;i[o.t(r)]=function(){e.set("Drupal.visitor.autologout_login",Math.round((new Date).getTime()/1e3)),t(this).dialog("destroy"),clearTimeout(n),y()};var s=a.autologout.no_button;i[o.t(s)]=function(){t(this).dialog("destroy"),h()}}return t('<div id="autologout-confirm">'+l.message+"</div>").dialog({modal:!0,closeOnEscape:!1,width:l.modal_width,dialogClass:"autologout-dialog",title:l.title,buttons:i,close:function(t,o){h()}})}()}})))}function p(){t(r).dialog("destroy"),o.Ajax["autologout.getTimeLeft"].autologoutGetTimeLeft((function(t){t>0?setTimeout(m,t):h()}))}function v(t,o){const e=new CustomEvent("autologout",{detail:{logoutMethod:t,logoutUrl:o}});document.dispatchEvent(e)}function h(){if(l.use_alt_logout_method){var o=drupalSettings.path.baseUrl+"autologout_alt_logout";v("alternative",o),window.location=o}else t.ajax({url:drupalSettings.path.baseUrl+"autologout_ajax_logout",type:"POST",beforeSend:function(t){t.setRequestHeader("X-Requested-With",{toString:function(){return""}})},success:function(){var t=l.redirect_url;v("normal",t),window.location=t},error:function(t,o){403!==t.status&&404!==t.status||(window.location=l.redirect_url)}})}function y(){o.Ajax["autologout.refresh"].autologoutRefresh(m)}}}}(jQuery,Drupal,window.Cookies);